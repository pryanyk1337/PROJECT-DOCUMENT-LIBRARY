# CONSTITUTION_CORE.md

## НАЗНАЧЕНИЕ

Фундаментальный документ, определяющий базовые принципы проектирования AI-агентов. Является верхнеуровневым законом для всех остальных документов библиотеки. Любой агент, созданный по этой методологии, ОБЯЗАН соответствовать принципам данного документа.

---

## ИЕРАРХИЯ ДОКУМЕНТОВ

```
УРОВЕНЬ 0 (ЗАКОН): CONSTITUTION_CORE.md
    ↓
УРОВЕНЬ 1 (СТАНДАРТЫ): QUALITY_STANDARDS.md, CONSTRAINTS_REGISTRY.md
    ↓
УРОВЕНЬ 2 (ПРОТОКОЛЫ): SELF_CHECK_PROTOCOLS.md, INTERVIEW_PHASE_GUIDE.md
    ↓
УРОВЕНЬ 3 (ШАБЛОНЫ): AGENT_DOCUMENTATION_TEMPLATE.md
```

**Правило приоритета:** При конфликте документов — приоритет у документа более высокого уровня.

---

## РАЗДЕЛ 1: АКСИОМЫ ПРОЕКТИРОВАНИЯ

### Аксиома 1: Автономность агента

**Формулировка:** Агент ДОЛЖЕН быть способен выполнить задачу без внешнего вмешательства после получения входных данных.

**Следствия:**
- Агент САМ собирает недостающие данные (через интервью или инструменты)
- Агент САМ формулирует предположения при неопределённости
- Агент САМ решает проблемы (альтернативные стратегии, расширение поиска)

**Проверка соответствия:**
```
[ ] Агент не требует от пользователя выполнения промежуточных действий
[ ] Все инструкции в агенте — для агента, не для пользователя
[ ] Агент имеет механизм обработки неопределённости
```

### Аксиома 2: Единственность ответственности

**Формулировка:** Один агент = одна чётко определённая функция.

**Следствия:**
- Агент НЕ совмещает противоречащие профили (например, генерация + строгая верификация)
- Сложные задачи декомпозируются на цепочку агентов
- Каждый агент имеет измеримый результат

**Проверка соответствия:**
```
[ ] Цель агента формулируется ОДНИМ предложением
[ ] Выходной формат агента единообразен
[ ] Агент не содержит взаимоисключающих принципов
```

### Аксиома 3: Измеримость результата

**Формулировка:** Результат работы агента ДОЛЖЕН быть верифицируемым по объективным критериям.

**Следствия:**
- Каждый агент имеет критерии успеха (метрики, чек-листы)
- Результат можно проверить без субъективной оценки
- Агент сам оценивает качество своего результата перед выдачей

**Проверка соответствия:**
```
[ ] Критерии успеха определены до начала работы
[ ] Результат содержит блок самооценки
[ ] Метрики численные или бинарные (✓/✗)
```

### Аксиома 4: Переиспользуемость

**Формулировка:** Агент ДОЛЖЕН быть применим к классу задач, а не к единичному случаю.

**Следствия:**
- Агент параметризован (принимает переменные, а не константы)
- Документация агента позволяет адаптировать его без переписывания
- Агент не содержит жёстко закодированных данных предметной области

**Проверка соответствия:**
```
[ ] Агент работает с разными входными данными одного типа
[ ] Изменение контекста не требует изменения промпта
[ ] Агент задокументирован по стандартному шаблону
```

---

## РАЗДЕЛ 2: ПРОФИЛЬНАЯ СИСТЕМА K/Б/Т

### 2.1 Определение профилей

| Профиль | Код | Функция | Ключевой принцип |
|---------|-----|---------|------------------|
| **Креативный** | К | Генерация идей, вариантов, концепций | Множественность (минимум 3-5 вариантов) |
| **Структурный** | Б | Организация, планирование, адаптация | Декомпозиция + Контекст |
| **Точный** | Т | Верификация, реализация, измерение | Измеримость + Предотвращение ошибок |
| **Гибридный** | Г | Комбинация 2 профилей | Зависит от комбинации |

### 2.2 Принципы профилей

**Профиль К (Креативный):**
| Принцип | Описание | Применение |
|---------|----------|------------|
| Множественность | Минимум 3-5 вариантов | Генерация концепций, названий, идей |
| Аналогии и метафоры | Связи из смежных областей | Поиск нестандартных решений |
| Ограничения как инструмент | Рамки усиливают креатив | Работа с брифами |
| Итеративность | Циклы "создать → фидбэк → улучшить" | Развитие идей |

**Профиль Б (Структурный):**
| Принцип | Описание | Применение |
|---------|----------|------------|
| Структура и декомпозиция | Разбиение на измеримые этапы | Планирование, roadmap |
| Адаптивность | Подстройка под контекст/аудиторию | Контент, стратегии |
| Практический результат | Фокус на готовый артефакт | Планы, таблицы |
| Контекст обязателен | Работа с данными о среде | Анализ, исследования |

**Профиль Т (Точный):**
| Принцип | Описание | Применение |
|---------|----------|------------|
| Измеримость | SMART-цели и метрики | Верификация, код |
| Предотвращение ошибок | Чек-листы типичных ошибок | QA, тестирование |
| Строгий формат | Регламентированный вывод | JSON, таблицы, код |
| Граничные условия | Обработка edge-cases | Надёжность систем |

### 2.3 Матрица совместимости профилей

| Связка | Совместимость | Требование |
|--------|---------------|------------|
| К → Б | ✅ Высокая | Б структурирует идеи К |
| К → Т | ⚠️ Средняя | Требуется адаптер (Г-агент) |
| Б → К | ✅ Высокая | Б задаёт рамки для К |
| Б → Т | ✅ Высокая | Б планирует, Т реализует |
| Т → К | ❌ Низкая | Редко применимо |
| Т → Б | ✅ Высокая | Т даёт данные, Б интерпретирует |

---

## РАЗДЕЛ 3: МНОГОУРОВНЕВАЯ АРХИТЕКТУРА АГЕНТА

### 3.1 Обязательные компоненты агента

```
┌─────────────────────────────────────────┐
│           СЛОЙ ИДЕНТИФИКАЦИИ            │
│  ID, название, профиль, версия          │
├─────────────────────────────────────────┤
│           СЛОЙ ИНТЕРВЬЮ                 │
│  Метамодель NLP, уточняющие вопросы     │
├─────────────────────────────────────────┤
│           СЛОЙ ИНСТРУКЦИЙ               │
│  Процесс работы, алгоритмы, правила     │
├─────────────────────────────────────────┤
│           СЛОЙ ВВОДА-ВЫВОДА             │
│  Входной формат, выходной формат        │
├─────────────────────────────────────────┤
│           СЛОЙ САМОПРОВЕРКИ             │
│  Критерии успеха, чек-листы, метрики    │
├─────────────────────────────────────────┤
│           СЛОЙ ОГРАНИЧЕНИЙ              │
│  Запреты, граничные условия, fallback   │
└─────────────────────────────────────────┘
```

### 3.2 Минимальный жизнеспособный агент (MVA)

Агент считается валидным, если содержит:

```
[ ] Уникальный ID (формат: [Профиль]-[NNN])
[ ] Цель (1 предложение)
[ ] Профиль (К/Б/Т/Г)
[ ] Фаза интервью (метамодель NLP)
[ ] Входной формат
[ ] Выходной формат
[ ] Процесс работы (минимум 3 шага)
[ ] Критерии успеха (минимум 2)
[ ] Ограничения (минимум 2)
```

---

## РАЗДЕЛ 4: ЖИЗНЕННЫЙ ЦИКЛ АГЕНТА

### 4.1 Фазы жизненного цикла

```
[ПРОЕКТИРОВАНИЕ] → [СОЗДАНИЕ] → [ТЕСТИРОВАНИЕ] → [ЭКСПЛУАТАЦИЯ] → [ОБНОВЛЕНИЕ/АРХИВ]
```

### 4.2 Критерии перехода между фазами

| Переход | Критерий |
|---------|----------|
| Проектирование → Создание | Все параметры MVA определены |
| Создание → Тестирование | JSON + Промпт созданы |
| Тестирование → Эксплуатация | Пройдены все уровни самопроверки |
| Эксплуатация → Обновление | Выявлены ошибки ИЛИ изменились требования |
| Эксплуатация → Архив | Агент устарел / заменён |

---

## РАЗДЕЛ 5: ЗАКОНЫ ВЗАИМОДЕЙСТВИЯ АГЕНТОВ

### 5.1 Закон совместимости форматов

**Формулировка:** Выходной формат агента A ДОЛЖЕН быть входным форматом агента B без преобразования.

**Следствие:** При несовместимости — добавить агент-адаптер.

### 5.2 Закон единого потока данных

**Формулировка:** Данные в цепочке агентов движутся в одном направлении (исключение: явные петли обратной связи с лимитом итераций).

### 5.3 Закон минимальной цепочки

**Формулировка:** Цепочка агентов содержит минимально необходимое количество агентов для решения задачи.

**Проверка:** Если удаление агента из цепочки не влияет на результат — агент избыточен.

---

## ПРИМЕРЫ ПРИМЕНЕНИЯ

### Пример 1: Проверка агента на соответствие Аксиоме 1 (Автономность)

```
Агент: K-001 (Генератор концепций)

Проверка:
[✓] Агент не требует от пользователя выполнения промежуточных действий
    → Агент сам задаёт уточняющие вопросы в фазе интервью
[✓] Все инструкции в агенте — для агента, не для пользователя
    → Нет фраз "скопируйте", "передайте", "проверьте"
[✓] Агент имеет механизм обработки неопределённости
    → "Если пользователь не может уточнить — сформулировать явные предположения"

Результат: Агент соответствует Аксиоме 1 ✅
```

### Пример 2: Определение профиля для задачи

```
Задача: Создать контент-план для блога на месяц

Анализ:
- Требуется структурировать темы по неделям → Декомпозиция
- Требуется адаптировать под ЦА → Адаптивность
- Результат — готовая таблица → Практический результат

Все принципы относятся к профилю Б.

Решение: Использовать агент профиля Б (Б-002: Контент-архитектор)
```

---

VERSION: 1.0 | DATE: 2026-02-27